{%-if include.category-%}
  {%-assign pages = site.categories[include.category]-%}  
{%-else-%}
  {%-assign pages = site.pages-%}
{%-endif-%}

{%-if include.limit and pages.size > include.limit-%}
  {%-assign limit_exceeded = true-%}
{%-else-%}
  {%-assign limit_exceeded = false-%}
{%-endif-%}

category: {{ include.category }}
size: {{ pages.size }}
total: {{ site.pages.size }}

{%- if pages.size > 0 -%}
  <ul>
    {%- for page in pages limit: include.limit -%}
        <li>
          <a href="{{ page.url | relative_url }}">{{ page.title }}</a>
        </li>
    {%- endfor -%}
    {%- if include.show_more and limit_exceeded -%}
      <li><a href="{{ include.show_more_url }}">{{ include.show_more_text | default: "Show more..." }}</a></li>
    {%- endif -%}
  </ul>
{%- endif -%}